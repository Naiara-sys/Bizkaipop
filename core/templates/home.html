<!--itslucyax-->
{% extends 'base.html' %}
{% load static %}

{% block title %}Inicio - Bizkaipop{% endblock %}
{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/map.css' %}">
{% endblock %}
{% block content %}
<!-- Hero Section -->
<section class="hero">
    <div class="container">
        <div class="hero-content">
            <h1 class="hero-title">Compra y vende en <span class="highlight">Bizkaia</span></h1>
            <p class="hero-subtitle">El marketplace local donde encontrarÃ¡s lo que buscas</p>
            
            <!-- Buscador principal -->
            <div class="search-bar">
                <input type="text" placeholder="Â¿QuÃ© estÃ¡s buscando?" class="search-input">
                <button class="btn btn-primary">Buscar</button>
            </div>
        </div>
    </div>
</section>

<!-- CategorÃ­as Populares -->
<section class="categories-section">
    <div class="container">
        <h2 class="section-title">CategorÃ­as populares</h2>
        
        <div class="categories-grid">
            {% for categoria in categorias %}
           <a href="{% url 'catalog' %}?category={{ categoria.id }}" class="category-card">
    <span class="category-icon">{{ categoria.icono }}</span>
    <span class="category-name">{{ categoria.name }}</span>
</a>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Productos Destacados -->
<section class="products-section">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">Productos destacados</h2>
            <a href="{% url 'catalog' %}" class="btn btn-outline">Ver todos</a>
        </div>
        
       <div class="products-grid">
    {% for producto in productos %}
    <div class="product-card">
        <div class="product-image">
            {% if producto.images.first %}
                <img src="{{ producto.images.first.image.url }}" alt="{{ producto.title }}">
            {% else %}
                <img src="https://via.placeholder.com/300x200?text=Producto" alt="Sin imagen">
            {% endif %}
            <span class="product-badge">Destacado</span>
        </div>
        
        <div class="product-info">
    <h3 class="product-title">{{ producto.title }}</h3>

    {% if producto.producer %}
        <p class="product-producer">
            {{ producto.producer.name }} Â· {{ producto.producer.municipality }}
            {% if producto.producer.is_ecological %}
                <span class="eco-text">ðŸŒ±</span>
            {% endif %}
        </p>
    {% endif %}

    <p class="product-price">
    {{ producto.price }}â‚¬ / {{ producto.get_unit_display }}
</p>
</div>

        
        <div class="product-actions">
            <a href="{% url 'product_detail' producto.id %}" class="btn btn-primary btn-block">
                Ver detalles
            </a>
        </div>
    </div>
    {% endfor %}
</div>

    </div>
</section>
<!-- Mapa de Baserris -->
<section class="map-section">
    <div class="container">
        <h2 class="section-title">Nuestros baserris en Bizkaia</h2>
        <p class="section-subtitle">
            Productos locales directamente del caserÃ­o a tu mesa.
        </p>

        <div id="map" class="baserri-map"></div>
    </div>
</section>
<!-- Call to Action -->
<section class="cta-section">
    <div class="container">
        <div class="cta-content">
            <h2>Â¿Tienes algo que vender?</h2>
            <p>Publica tu anuncio gratis y llega a miles de compradores en Bizkaia</p>
            <a href="{% url 'publish_product' %}" class="btn btn-primary btn-large">
            Publicar ahora
            </a>
        </div>
    </div>
</section>
{% endblock %}
{% block extra_js %}
<link
  rel="stylesheet"
  href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
/>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
    const map = L.map('map').setView([43.2194, -2.9856], 9);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: 'Â© OpenStreetMap'
    }).addTo(map);
</script>
{% endblock %}

